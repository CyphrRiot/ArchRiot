#!/bin/bash

# Simple, clean progress bar that updates in place
# OhmArchy themed colors

# Colors
PURPLE='\033[38;2;157;123;216m'   # #9d7bd8
BLUE='\033[38;2;125;166;255m'     # #7da6ff
GREEN='\033[38;2;158;206;106m'    # #9ece6a
WHITE='\033[38;2;255;255;255m'    # #ffffff
GRAY='\033[38;2;104;104;104m'     # #686868
RESET='\033[0m'

show_progress() {
    local percent=$1
    local label="$2"
    local width=40

    # Calculate filled portion
    local filled=$((percent * width / 100))
    local empty=$((width - filled))

    # Build bar
    local bar=""
    for ((i=0; i<filled; i++)); do bar+="█"; done
    for ((i=0; i<empty; i++)); do bar+="░"; done

    # Print with carriage return to overwrite - use consistent 25-char padding
    printf "\r${WHITE}%-25s ${GRAY}[${BLUE}%s${GRAY}] ${GREEN}%3d%%${RESET}" "$label" "$bar" "$percent"
}

# Demo
echo -e "${PURPLE}Testing Progress Bar Update In Place:${RESET}"
echo ""

for task in "Installing packages" "Configuring system" "Setting up themes" "Finishing setup"; do
    for percent in {0..100..2}; do
        show_progress $percent "$task"
        sleep 0.02
    done
    echo ""  # New line when task completes
    sleep 0.5
done

echo ""
echo -e "${GREEN}✅ All tasks completed!${RESET}"
